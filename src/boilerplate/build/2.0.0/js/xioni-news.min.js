define(["jquery","vue","moment","lodash","textile-js"],function(o,a,e,s,r){o.fn.krXioniNews=function(){o(this).find("[data-xioni^='news.']:not(.xioni-prevent-default)").each(function(){var t,i,n;n="xid-"+Math.floor(Math.random()*Math.pow(83,6)),i=o(this).data("xioni").split("."),t=!1,o(this).data("params")&&(t=o(this).data("params").replace(/\'/g,'"'),t=JSON.parse(t)),o(this).attr("id",n),o(this).removeAttr("data-xioni");new a({el:"#"+n,data:{items:[],urlBase:"https://www.rheingau.de/data/",details:!1,params:t},computed:{url:function(){return"https://api.klickrhein.de/"+i[0]+".php?id="+i[1]}},methods:{dateFormat:function(t,i){return null==i&&(i="LL"),e.unix(t).format(i)},textile:function(t){return r(t.trim())},dataPath:function(t){if(t)return this.urlBase+t},goTo:function(t){this.details=s.filter(this.items,["id",t])[0],window.location="#"+t,this.scrollTop()},goBack:function(){this.details=!1,window.location="#"},scrollTop:function(){o("body,html").animate({scrollTop:o("#"+n).offset().top},500)}},mounted:function(){var i=this;o.getJSON(this.url,function(t){i.items=t,window.location.hash&&i.goTo(window.location.hash.replace(/#/,""))}),o(window).bind("popstate",function(){0===window.location.hash.length&&(i.details=!1)})}})})}});